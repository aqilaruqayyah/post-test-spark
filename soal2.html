<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Post-Test Soal 2 - Kardus Kubus</title>
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: 'Poppins', sans-serif;
      background-color: #cce7ff;
    }

    body {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      text-align: center;
      padding: 20px;
      box-sizing: border-box;
      min-height: 100vh;
    }

    .soal-box {
      background: #ffffffcc;
      border-radius: 20px;
      padding: 20px;
      max-width: 700px;
      width: 100%;
      box-shadow: 0 8px 25px rgba(0,0,0,0.2);
      position: relative;
      z-index: 1;
    }

    h2 {
      color: #6a5acd;
      margin-bottom: 10px;
    }

    p {
      font-size: 1.1em;
      margin-bottom: 15px;
    }

    model-viewer {
      width: 100%;
      height: 300px;
      border-radius: 15px;
      margin: 15px 0;
      background: #f1f1f1;
      transform-origin: top left;
    }

    .input-container {
      margin: 15px 0;
    }

    .input-container input {
      width: 90%;
      max-width: 300px;
      padding: 8px;
      border-radius: 5px;
      border: 1px solid #aaa;
      font-size: 16px;
    }

    button {
      padding: 10px 20px;
      background-color: #6a5acd;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      margin-top: 10px;
    }

    button:disabled {
      background-color: #aaa;
      cursor: not-allowed;
    }

    /* Chatbot */
    #chatbot {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 300px;
      max-height: 400px;
      background: #fff;
      border-radius: 15px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.3);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      font-family: 'Poppins', sans-serif;
      z-index: 9999;
      transition: transform 0.3s;
      transform: translateY(100%);
    }

    #chatbot.open {
      transform: translateY(0);
    }

    #chatbot-header {
      background: #6a5acd;
      color: #fff;
      padding: 10px;
      cursor: pointer;
      font-weight: 700;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    #chatbot-messages {
      flex: 1;
      padding: 10px;
      overflow-y: auto;
      font-size: 0.9em;
    }

    #chatbot-input {
      display: flex;
      border-top: 1px solid #ccc;
    }

    #chatbot-input input {
      flex: 1;
      padding: 8px;
      border: none;
      outline: none;
      font-size: 0.9em;
    }

    #chatbot-input button {
      padding: 8px 12px;
      border: none;
      background: #6a5acd;
      color: #fff;
      cursor: pointer;
    }

    #chatbot-toggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #6a5acd;
      color: #fff;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 1.5em;
      cursor: pointer;
      z-index: 10000;
    }

    @media (max-width: 480px) {
      model-viewer { height: 200px; }
      #chatbot { width: 90%; right: 5%; }
    }
  </style>
</head>
<body>

<div class="soal-box">
  <h2>Soal 2</h2>
  <p>âœ¨ Sebuah kardus penyimpanan berbentuk kubus memiliki panjang rusuk 40 cm. Di dalam kardus tersebut akan dibuat ruang kosong berbentuk balok dengan ukuran 40 Ã— 20 Ã— 20 cm untuk menyimpan barang khusus. Berapa sisa volume ruang dalam kardus setelah bagian balok tersebut diambil?</p>

  <model-viewer id="kardus3d"
                src="https://raw.githubusercontent.com/aqilaruqayyah/model-3d/main/kubbal.glb"
                alt="Kardus Kubus 3D"
                ar
                camera-controls>
  </model-viewer>

  <div class="input-container">
    <input type="number" id="jawaban" placeholder="Masukkan jawaban sisa volume (cmÂ³)">
  </div>

  <button id="nextSoal" disabled>Lanjut ke Soal 3</button>
</div>

<!-- Chatbot -->
<div id="chatbot">
  <div id="chatbot-header">
    Chatbot <span id="close-chat">Ã—</span>
  </div>
  <div id="chatbot-messages"></div>
  <div id="chatbot-input">
    <input type="text" id="chat-input" placeholder="Ketik pesan...">
    <button id="send-chat">Kirim</button>
  </div>
</div>
<div id="chatbot-toggle">ðŸ’¬</div>

<script>
const jawabanInput = document.getElementById('jawaban');
const nextBtn = document.getElementById('nextSoal');

// Aktifkan tombol lanjut saat jawaban diisi
jawabanInput.addEventListener('input', () => {
  if(jawabanInput.value.trim() !== ""){
    localStorage.setItem("soal2", jawabanInput.value.trim());
    nextBtn.disabled = false;
  } else {
    nextBtn.disabled = true;
  }
});

nextBtn.addEventListener('click', () => {
  window.location.href = "soal3.html";
});

// Chatbot
const chatbot = document.getElementById('chatbot');
const toggle = document.getElementById('chatbot-toggle');
const closeChat = document.getElementById('close-chat');
const messages = document.getElementById('chatbot-messages');
const chatInput = document.getElementById('chat-input');
const sendChat = document.getElementById('send-chat');

toggle.addEventListener('click', () => { chatbot.classList.toggle('open'); });
closeChat.addEventListener('click', () => { chatbot.classList.remove('open'); });

sendChat.addEventListener('click', () => {
  const text = chatInput.value.trim();
  if(text){
    const msg = document.createElement('div');
    msg.textContent = `Kamu: ${text}`;
    messages.appendChild(msg);
    chatInput.value = '';

    // Respon sederhana
    const botMsg = document.createElement('div');
    botMsg.textContent = `Bot: Maaf, saya belum bisa membalas.`;
    messages.appendChild(botMsg);

    messages.scrollTop = messages.scrollHeight;
  }
});

chatInput.addEventListener('keypress', (e) => {
  if(e.key === 'Enter'){ sendChat.click(); }
});
</script>

</body>
</html>
